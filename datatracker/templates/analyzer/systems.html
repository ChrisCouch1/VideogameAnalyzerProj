{% extends 'base.html' %}

{% block header %}
{% endblock %}

{% block content %}
<div class="mt-3">
<form method="post">
    <div class = "row">
        <div class = "col-9">
            <label for="consoles">Choose a console to view game sales data for</label>
            <form method="post">
                <select class="form-select" id="consoles" name="consoles">
                {% for console in platforms %}
                    <option  value="{{ console }}">{{ console }}</option>
                {% endfor %}
                </select>
            </form>
        </div>
        <div class = "col-auto d-grid gap-2">
            <button class="btn btn-primary" type="submit" >Search</button>
        </div>

    </div>
</form>
</div>
<div class = "row">
    <div class ="col-1"></div>
    <div class ="col-10"><canvas id="chart_placeholder" width="400px" height="400px"></canvas></div>
    <div class ="col-1"></div>
</div>


<script src="./../../static/Chart.js"></script>
<script>
    var ctx = document.getElementById('chart_placeholder');
    var salesChart13 = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [{% for platform in platforms13 %}'{{ platform }}'{% if not loop.last %}, {% endif %}{% endfor %}],
            datasets: [{
                label: 'Millions of Game Copies Sold',
                data: [{% for salesfig in sales13 %}{{ salesfig }}{% if not loop.last %}, {% endif %}{% endfor %}],
                backgroundColor: [{% for each in platforms13 %}'#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6){% if not loop.last %}, {% endif %}{% endfor %}],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            title: {
                display: true,
                text: 'Game Sales Per Platform Since 2013'
            }
        }
    });

    var cts = document.getElementById('chart_placeholder');
    var salesChartConsole = new Chart(cts, {
        type: 'pie',
        data: {
            labels: [{% for title in console_titles %}'{{ title }}'{% if not loop.last %}, {% endif %}{% endfor %}],
            datasets: [{
                label: 'Millions of Game Copies Sold',
                data: [{% for salesfig in title_sales %}{{ salesfig }}{% if not loop.last %}, {% endif %}{% endfor %}],
                backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
                    ],
                borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {

            title: {
                display: true,
                text: 'Game Sales on Console'
            },
            legend: {
                display: false
                }
        }
    });
</script>


{% endblock %}
